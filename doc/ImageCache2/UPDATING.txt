UNIX系OSを前提として書いているので、Windowsではアレンジする必要があるかもしれません。

--

■ 2005/05/11版より前から更新するとき
  - 新たにブラックリストを作成したのでデータベースの更新をする。

1. doc/ImageCache2/ic2_install.phpsを拡張子を.phpに変えてp2ディレクトリ直下に置く。
2. Webブラウザでic2_install.phpにアクセスし、"..(略)..OK!"と表示されれば完了。
3. ic2_install.phpを削除する。

--

■ 2005/04/30版より前から更新するとき
  - ダウンロード時のエラーを記録するようにしたのでデータベースの更新をする。

1. doc/ImageCache2/ic2_install.phpsを拡張子を.phpに変えてp2ディレクトリ直下に置く。
2. Webブラウザでic2_install.phpにアクセスし、"..(略)..OK!"と表示されれば完了。
3. ic2_install.phpを削除する。

--

■ 2005/01/26版より前から更新するとき
  - 検索・ソートの高速化を期待してインデックスを張るようにしたのと、
    データキャッシュ用のテーブルを作成するのでデータベースの更新をする。

1. doc/ImageCache2/ic2_install.phpsを拡張子を.phpに変えてp2ディレクトリ直下に置く。
2. Webブラウザでic2_install.phpにアクセスし、"..(略)..OK!"と表示されれば完了。
3. ic2_install.phpを削除する。
4. cacheディレクトリの中にfunction_cacheディレクトリがある場合はそれも削除する。

--

■ 2004/07/02版より更新するとき
  - 長く使っているとinodeの制限により画像が一定量以上キャッシュできなく
    なってしまう問題が発覚したので、画像1,000枚ごとにサブディレクトリを作成し
    そこに保存するように仕様変更した。
  - これに対応するため、それまで溜めていた画像を以下の手順で移動する。

1. doc/ImageCache2/ic2_imgmover.phpsを拡張子を.phpに変えてp2ディレクトリ直下に置く。
2. Webブラウザでic2_imgmover.phpにアクセスし、"..(略)..done!"と表示されれば完了。
   ただし携帯用サムネイルなどは移動できないヘタレ使用なので
   cache/qgva_vとcache/vgaを空にする。（ディレクトリは削除しない）
   スクリプトを改造してこれらの移動もできるようにしてもOK。
3. ic2_imgmover.phpを削除する。

--

■ 無印イメージキャッシュからログを引き継ぐとき
  - イメージキャッシュのログを解析し、データベースに挿入する。
    画像は移動ではなくコピーし、同時にサムネイルの再構築も行う。
  - 非常に実行時間が長いので、Webからの実行はタイムアウトする
    可能性が高いのでおすすめできない。コマンドラインで実行されたし。

1. まずはdoc/ImageCache2/INSTALL.txtにしたがってデータベースの準備等を済ませる。
2. doc/ImageCache2/ic2_ic_logconv.phpsをp2ディレクトリ直下に置く。
3. コマンドラインからルート権限で
   # chmod 777 cache/src cache/6464
   のようにしてディレクトリに書き込めるようにする。（Windowsでは不要）
   データベースにSQLiteを使う場合はデータベースファイルに書き込み権限があるか要チェック。
4. コマンドラインから php ic2_ic_logconv.phps として実行する。
5. コマンドラインからルート権限で
   # chmod 755 cache/src cache/6464
   # chown -R www cache/src cache/6464
   のようにしてパーミッションを戻し、新たに作成したサブディレクトリやサムネイル、
   コピーした画像のオーナーをhttpdを実行するユーザーと同じにする。（Windowsでは不要）
6. Webブラウザでiv2.phpにアクセスし、移行が成功しているのを確認したら、
   元のキャッシュをディレクトリ（data/p2_image_cache, data/p2_image_thumb）ごと削除する。
7. ic2_ic_logconv.phpsを削除する。

--
